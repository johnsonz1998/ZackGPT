<div class="threads-container">
  <div class="threads-header">
    <button class="new-chat-btn" (click)="createNewChat()" [disabled]="isCreatingThread">
      <span class="icon">+</span>
      New chat
    </button>
  </div>

  <!-- Error Display -->
  <div class="error-state" *ngIf="error">
    <p>{{ error }}</p>
    <button class="retry-btn" (click)="retry()">Retry</button>
  </div>

  <!-- Connection Status -->
  <div class="connection-status disconnected" *ngIf="!connected && !loading">
    Backend disconnected
  </div>
  
  <div class="connection-status connected" *ngIf="connected">
    Connected
  </div>

  <!-- Thread Creator -->
  <div class="thread-creator" *ngIf="isCreatingThread">
    <input
      id="newThreadInput"
      type="text"
      [(ngModel)]="newThreadName"
      (keyup)="onKeyPress($event)"
      placeholder="Enter thread name..."
      class="creator-input">
    <div class="creator-actions">
      <button class="btn create-btn" (click)="createThread()" [disabled]="!newThreadName.trim()">
        Create
      </button>
      <button class="btn cancel-btn" (click)="cancelCreatingThread()">
        Cancel
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    Loading threads...
  </div>

  <!-- Threads List -->
  <div class="threads-list" *ngIf="!loading">
    <!-- Empty State -->
    <div class="empty-state" *ngIf="threads.length === 0">
      <p *ngIf="connected">No conversations yet</p>
      <p *ngIf="!connected">Cannot load threads while disconnected</p>
    </div>

    <!-- Thread Items - Simple chat descriptions only -->
    <button 
      class="thread-item" 
      *ngFor="let thread of threads; trackBy: trackThread"
      [class.selected]="thread.id === selectedThreadId"
      (click)="selectThread(thread)">
      
      <div class="thread-content">
        <div class="thread-title">{{ thread.title || 'New conversation' }}</div>
      </div>
      
      <div class="thread-actions">
        <button 
          class="delete-btn" 
          (click)="deleteThread(thread, $event)"
          title="Delete conversation">
          Ã—
        </button>
      </div>
    </button>
  </div>
</div> 